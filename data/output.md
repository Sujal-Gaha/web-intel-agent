

--- From : https://www.bntharu.com.np ---
Baijan.
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


[
  * Naming is hard  Apr 20, 2025  (3 min read) ](https://www.bntharu.com.np/blog/2025/naming-is-hard)[
  * Generators in Javascript  Sep 14, 2024  (2 min read) ](https://www.bntharu.com.np/blog/2024/generators-in-js)[
  * Design Principles Every Software Developer Should Know  Sep 9, 2024  (13 min read) ](https://www.bntharu.com.np/blog/2024/design-principles)[
  * A Beginner's Guide to MongoDB: Moving from SQL to NoSQL  Sep 5, 2024  (11 min read) ](https://www.bntharu.com.np/blog/2024/mongodb-basics)[
  * Generate filter input for prisma  Jul 25, 2023  (3 min read) ](https://www.bntharu.com.np/blog/2023/generate-filter-input-for-prisma)[
  * Permission Based Authorization in Graphql using graphql-rp-directive  Jul 8, 2023  (2 min read) ](https://www.bntharu.com.np/blog/2023/permission-based-authorization-in-graphql-using-graphql-rp-directive)[
  * Setup dockerized development with frontend, backend and database  May 6, 2023  (1 min read) ](https://www.bntharu.com.np/blog/2023/setup-dockerized-development)[
  * Use Composition to get rid of props drilling in React  Feb 17, 2023  (2 min read) ](https://www.bntharu.com.np/blog/2023/composition-in-react)[
  * How to publish a typescript package to npm?  Nov 11, 2022  (2 min read) ](https://www.bntharu.com.np/blog/2022/publish-ts-package-to-npm)[
  * Docker containers in same network  Sep 27, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/docker-containers-in-same-network)[
  * Async react select field  Sep 9, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/async-react-select-field)[
  * Audit the npm dependencies  Aug 4, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/audit-the-npm-dependencies)[
  * Must prefer union of interfaces to interface of unions  Jun 27, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/must-prefer-union-of-interfaces-to-interface-of-unions)[
  * Must know concepts to master Javascript  Jun 15, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/must-know-concepts-to-master-javascript)[
  * Types that always represent valid states  Jun 10, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/types-that-always-represent-valid-states)[
  * Async and sync behavior of code  Jun 5, 2022  (2 min read) ](https://www.bntharu.com.np/blog/2022/async-and-sync-behavior-of-code)[
  * Popular Blogs to Follow  Jun 4, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/popular-blogs)[
  * List of blogs and videos about different technologies  May 20, 2022  (3 min read) ](https://www.bntharu.com.np/blog/resources)[
  * Generate change logs from conventional commits  Apr 2, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/generate-change-logs-from-conventional-commits)[
  * Authentication workflow using access token and refresh token  Mar 15, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/authentication-workflow-using-access-token-and-refresh-token)[
  * Generic higher order component in react using typescript  Mar 10, 2022  (2 min read) ](https://www.bntharu.com.np/blog/2022/generic-higher-order-component-in-react-using-typescript)[
  * Setup express with typescript, eslint, prettier and husky  Mar 3, 2022  (2 min read) ](https://www.bntharu.com.np/blog/2022/setup-express-with-typescript-eslint-prettier-and-husky) 

*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np ---
Baijan.
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


[
  * Naming is hard  Apr 20, 2025  (3 min read) ](https://www.bntharu.com.np/blog/2025/naming-is-hard)[
  * Generators in Javascript  Sep 14, 2024  (2 min read) ](https://www.bntharu.com.np/blog/2024/generators-in-js)[
  * Design Principles Every Software Developer Should Know  Sep 9, 2024  (13 min read) ](https://www.bntharu.com.np/blog/2024/design-principles)[
  * A Beginner's Guide to MongoDB: Moving from SQL to NoSQL  Sep 5, 2024  (11 min read) ](https://www.bntharu.com.np/blog/2024/mongodb-basics)[
  * Generate filter input for prisma  Jul 25, 2023  (3 min read) ](https://www.bntharu.com.np/blog/2023/generate-filter-input-for-prisma)[
  * Permission Based Authorization in Graphql using graphql-rp-directive  Jul 8, 2023  (2 min read) ](https://www.bntharu.com.np/blog/2023/permission-based-authorization-in-graphql-using-graphql-rp-directive)[
  * Setup dockerized development with frontend, backend and database  May 6, 2023  (1 min read) ](https://www.bntharu.com.np/blog/2023/setup-dockerized-development)[
  * Use Composition to get rid of props drilling in React  Feb 17, 2023  (2 min read) ](https://www.bntharu.com.np/blog/2023/composition-in-react)[
  * How to publish a typescript package to npm?  Nov 11, 2022  (2 min read) ](https://www.bntharu.com.np/blog/2022/publish-ts-package-to-npm)[
  * Docker containers in same network  Sep 27, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/docker-containers-in-same-network)[
  * Async react select field  Sep 9, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/async-react-select-field)[
  * Audit the npm dependencies  Aug 4, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/audit-the-npm-dependencies)[
  * Must prefer union of interfaces to interface of unions  Jun 27, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/must-prefer-union-of-interfaces-to-interface-of-unions)[
  * Must know concepts to master Javascript  Jun 15, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/must-know-concepts-to-master-javascript)[
  * Types that always represent valid states  Jun 10, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/types-that-always-represent-valid-states)[
  * Async and sync behavior of code  Jun 5, 2022  (2 min read) ](https://www.bntharu.com.np/blog/2022/async-and-sync-behavior-of-code)[
  * Popular Blogs to Follow  Jun 4, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/popular-blogs)[
  * List of blogs and videos about different technologies  May 20, 2022  (3 min read) ](https://www.bntharu.com.np/blog/resources)[
  * Generate change logs from conventional commits  Apr 2, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/generate-change-logs-from-conventional-commits)[
  * Authentication workflow using access token and refresh token  Mar 15, 2022  (1 min read) ](https://www.bntharu.com.np/blog/2022/authentication-workflow-using-access-token-and-refresh-token)[
  * Generic higher order component in react using typescript  Mar 10, 2022  (2 min read) ](https://www.bntharu.com.np/blog/2022/generic-higher-order-component-in-react-using-typescript)[
  * Setup express with typescript, eslint, prettier and husky  Mar 3, 2022  (2 min read) ](https://www.bntharu.com.np/blog/2022/setup-express-with-typescript-eslint-prettier-and-husky) 

*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2024/mongodb-basics ---
A Beginner's Guide to MongoDB: Moving from SQL to NoSQL
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# A Beginner's Guide to MongoDB: Moving from SQL to NoSQL
Sept 05 2024 (11 min read) 
* * *
If you're coming from a background in relational databases like MySQL or PostgreSQL, the shift to NoSQL databases like MongoDB can seem a bit overwhelming. But don't worry—this guide is designed to help you make the transition smoothly. We'll walk through the key concepts of MongoDB and how it compares to SQL databases, along with practical examples.
## What is MongoDB?
MongoDB is a NoSQL database designed to store data in a flexible, JSON-like format called BSON (Binary JSON). Unlike SQL databases, where you define tables, columns, and data types upfront, MongoDB allows you to store data in documents, which can have varying structures. This flexibility makes it ideal for handling unstructured or semi-structured data.
## Key Differences Between SQL and MongoDB
### SQL (Relational DB)
  * **Data Structure:** SQL databases use tables composed of rows and columns to store data. Each row represents a record, and each column corresponds to a specific attribute of the data.
  * **Schema:** SQL databases have a fixed schema, meaning you must define the structure (columns and data types) of your tables before inserting data.
  * **Relationships:** SQL databases handle relationships between data through joins, which allow you to combine data from multiple tables based on a common key.
  * **Query Language:** SQL databases use SQL (Structured Query Language) to interact with and query the data.
  * **Transactions:** SQL databases follow the ACID (Atomicity, Consistency, Isolation, Durability) properties for transactions to ensure reliable and consistent data handling.


### MongoDB (NoSQL)
  * **Data Structure:** MongoDB stores data in collections, where each collection consists of documents. A document is a BSON (Binary JSON) object, similar to a JSON structure, and it can contain nested and varying fields.


> ### BSON vs JSON (Brief Overview)
  * **JSON (JavaScript Object Notation)** :
    * **Human-readable** text format used for data interchange.
    * Supports basic data types (string, number, boolean, array, object, null).
    * Commonly used in web APIs for transmitting data.
    * Lightweight and easy to work with.
  * **BSON (Binary JSON)** :
    * **Binary format** used by MongoDB for efficient storage and processing.
    * Supports additional data types (Date, Binary, ObjectID, Decimal128).
    * Optimized for speed and traversal in databases.
    * Not human-readable, but faster for machines to encode/decode.


> In short, **JSON** is simpler and human-readable, while **BSON** is optimized for database performance with more data types and binary structure.
  * **Schema:** MongoDB allows for flexible or dynamic schemas, meaning the structure of documents in a collection can vary, allowing for different fields across documents.
  * **Relationships:** MongoDB can handle relationships by embedding related data within a document or by referencing other documents, which provides more flexibility compared to SQL joins.
  * **Query Language:** MongoDB’s query language uses a format similar to JSON for querying, allowing you to filter, project, and manipulate data in a more intuitive manner.
  * **Transactions:** Since MongoDB version 4.0, it supports ACID transactions, making it suitable for applications that require guaranteed consistency across multiple operations.


## Collections and Documents: MongoDB's Core
In SQL, data is stored in tables, which have rows and columns. In MongoDB, data is stored in collections, and the entries within collections are called documents.
  * Collections in MongoDB are similar to tables in SQL, but unlike tables, collections don’t require a fixed schema. You can insert documents with different structures into the same collection.
  * Documents in MongoDB are similar to rows in SQL, but they are stored as JSON-like objects (BSON format), which means they can have nested fields and varying structures.


> Example Here’s how data might look in SQL versus MongoDB:
SQL (Table-Based): id name age email 1 John 25 john@gmail.com 2 Alice 30 alice@gmail.com MongoDB (Document-Based):
```
{
"_id": 1,
"name": "John",
"age": 25,
"email": "john@gmail.com"
}
{
"_id": 2,
"name": "Alice",
"age": 30,
"email": "alice@gmail.com"
}
```

As you can see, each document in MongoDB contains key-value pairs, similar to JSON objects.
## Setting Up MongoDB
Before diving into MongoDB commands, let’s make sure you have MongoDB installed and set up.
  1. Download MongoDB from the official [MongoDB website](https://www.mongodb.com/try/download/community).
  2. Install MongoDB on your machine and run the MongoDB service. You can use the following command to start MongoDB:

```
mongod
```

  1. MongoDB Shell: Open the MongoDB shell using the following command:

```
mongo
```

The shell allows you to interact with your MongoDB database directly.
## Basic CRUD Operations in MongoDB
Once you have MongoDB up and running, you’ll want to start working with your data. Let’s explore basic CRUD (Create, Read, Update, Delete) operations, similar to what you do in SQL.
### Inserting Data (Create)
In SQL, you would use an INSERT statement to add rows to a table. In MongoDB, you insert documents into collections using insertOne() or insertMany().
#### SQL Equivalent
```
INSERTINTO users (name, age) VALUES ('John', 25);
```

#### MongoDB Example
```
db.users.insertOne({ name: "John", age: 25 });
```

  * This creates a new document in the users collection.
  * MongoDB automatically generates an _id field for each document, which serves as the primary key.


### Querying Data (Read)
In SQL, you'd use SELECT to retrieve data. In MongoDB, you use `find()` to query documents.
#### SQL Equivalent
```
SELECT*FROM users WHERE age =25;
```

#### MongoDB Example
```
db.users.find({ age: 25 });
```

  * The find() method retrieves all documents that match the query. In this case, it will return all users with the age of 25.


### Updating Data (Update)
To update data in SQL, you'd use the UPDATE statement. In MongoDB, you use `updateOne()` or `updateMany()`.
#### SQL Equivalent
```
UPDATE users SET age =26WHEREname='John';
```

#### MongoDB Example
```
db.users.updateOne({ name: "John" }, { $set: { age: 26 } });
```

  * The $set operator modifies the specified field (age) while leaving the other fields unchanged.


### Deleting Data (Delete)
In SQL, you'd use the DELETE statement to remove data. In MongoDB, you use `deleteOne()` or `deleteMany()`.
### SQL Equivalent
```
DELETEFROM users WHEREname='John';
```

### MongoDB Example
```
db.users.deleteOne({ name: "John" });
```

  * This removes the document where the name is "John."


### Data Modeling in MongoDB
In SQL, you define a schema (a fixed structure for your data) using CREATE TABLE statements. MongoDB is schema-less, meaning that you don’t need to define a structure upfront. However, you can still use data modeling techniques to organize your data effectively.
**Embedding vs. Referencing** One of the biggest differences in MongoDB is how relationships between data are handled.
  * Embedding: You can store related data within the same document (similar to nested structures in JSON).
  * Referencing: Alternatively, you can store a reference (similar to a foreign key in SQL) to another document in a different collection.


#### Embedding Example
If you have users and their associated addresses, you can embed the address directly in the user document:
```
{
"_id": 1,
"name": "John",
"age": 25,
"address": {
"street": "123 Main St",
"city": "New York",
"zip": "10001"
  }
}
```

#### Referencing Example
Alternatively, you could store the address in a separate collection and reference it in the user document:
```
{
"_id": 1,
"name": "John",
"age": 25,
"addressId": 101
}
```
```
{
"_id": 101,
"street": "123 Main St",
"city": "New York",
"zip": "10001"
}
```

In MongoDB, it’s generally recommended to embed documents when the related data is accessed together and to reference when it’s not.
### Using MongoDB in Node.js
To integrate MongoDB into a Node.js application, you can use the official MongoDB Node.js driver. Alternatively, many developers prefer to use Mongoose, an ODM (Object Data Modeling) library for MongoDB.
### Setting Up a MongoDB Connection in Node.js
  1. Install the MongoDB driver:

```
npm install mongodb
```

  1. Connect to MongoDB in your Node.js application:

```
const { MongoClient } =require("mongodb");
asyncfunctionrun() {
constclient=newMongoClient("mongodb://localhost:27017");
try {
await client.connect();
    console.log("Connected to MongoDB");
constdb= client.db("myDatabase");
constcollection= db.collection("users");
// Insert a document
await collection.insertOne({ name: "John", age: 25 });
// Query the document
constuser=await collection.findOne({ name: "John" });
    console.log("Found User:", user);
  } finally {
await client.close();
  }
}
run().catch(console.error);
```

This simple script connects to a MongoDB instance, inserts a user, and then queries that user. After the operations, the connection to the MongoDB server is closed.
### Using Mongoose with MongoDB
Mongoose is an ODM (Object Data Modeling) library for MongoDB and Node.js. It provides schema-based modeling, making it easier to work with MongoDB in your Node.js applications. This article walks through setting up Mongoose, defining schemas, establishing relationships, and performing filtering, sorting, and pagination.
#### Setting Up Mongoose
First, install Mongoose using npm:
```
npm install mongoose
```

Then, connect to your MongoDB instance:
```
constmongoose=require("mongoose");
// Connect to MongoDB
mongoose.connect("mongodb://localhost:27017/myDatabase", {
  useNewUrlParser: true,
  useUnifiedTopology: true,
});
// Get a reference to the connection
constdb= mongoose.connection;
// Log an error if the connection fails
db.on("error", (err) => {
  console.error("connection error:", err);
});
// Log success message once connected
db.once("open", function () {
  console.log("Connected to MongoDB!");
});
```

#### Defining Schemas with Mongoose
In Mongoose, schemas define the structure of the documents in your collections. We’ll define two schemas: User and Todo.
**User Schema** The User schema will contain basic information such as name, email, and age.
```
constuserSchema=new mongoose.Schema({
  name: { type: String, required: true }, // Name is required
  email: { type: String, required: true, unique: true }, // Email must be unique
  age: Number, // Age is optional
});
```

**Todo Schema** The Todo schema will have fields for the title, description, and status. We'll also establish a relationship with the User schema by referencing the User model.
```
consttodoSchema=new mongoose.Schema({
  title: { type: String, required: true }, // Title is required
  description: String, // Description is optional
  status: { type: String, enum: ["pending", "completed"], default: "pending" }, // Status is either pending or completed
  user: { type: mongoose.Schema.Types.ObjectId, ref: "User" }, // Reference to the User model
  createdAt: { type: Date, default: Date.now }, // Automatically set createdAt to the current date
});
```

#### Creating Models
After defining the schemas, you can create models based on them. Models are what allow you to interact with the actual MongoDB collections.
```
constUser= mongoose.model("User", userSchema); // User model
constTodo= mongoose.model("Todo", todoSchema); // Todo model
```

#### Creating Documents and Establishing Relationships
Let’s create a new User and a related Todo document.
```
asyncfunctioncreateUserAndTodo() {
// Create a new user
constuser=newUser({
    name: "John Doe",
    email: "john@example.com",
    age: 30,
  });
await user.save(); // Save the user to the database
// Create a new todo linked to the user
consttodo=newTodo({
    title: "Complete homework",
    description: "Finish the math homework",
    user: user._id, // Reference the user's ID
  });
await todo.save(); // Save the todo to the database
  console.log("User and Todo created!");
}
createUserAndTodo();
```

#### Populating Related Data
When querying the Todo, we can use the .populate() method to fetch related User information.
```
asyncfunctiongetTodoWithUser() {
consttodo=await Todo.findOne({ title: "Complete homework" }).populate(
"user"
  ); // Populate the 'user' field with the associated User document
  console.log(todo); // Log the todo along with the associated user information
}
getTodoWithUser();
```

#### Filtering Data
To filter documents, you can use Mongoose’s find() method. Here’s an example of how to filter todos with a pending status:
```
asyncfunctiongetPendingTodos() {
consttodos=await Todo.find({ status: "pending" }); // Find all todos with status 'pending'
  console.log(todos); // Log the result
}
getPendingTodos();
```

#### Sorting Data
To sort documents, use the sort() method. This example shows how to sort todos by the createdAt field in descending order:
```
asyncfunctiongetTodosSortedByDate() {
consttodos=await Todo.find().sort({ createdAt: -1 }); // Sort by 'createdAt' in descending order
  console.log(todos); // Log the sorted result
}
getTodosSortedByDate();
```

#### Combining Filtering and Sorting
You can filter and sort results at the same time. For example, to find all completed todos and sort them by createdAt:
```
asyncfunctiongetCompletedTodosSorted() {
consttodos=await Todo.find({ status: "completed" }) // Filter todos with status 'completed'
    .sort({ createdAt: -1 }); // Sort by 'createdAt' in descending order
  console.log(todos); // Log the result
}
getCompletedTodosSorted();
```

#### Pagination with limit() and skip()
When dealing with large datasets, you can paginate results using limit() and skip(). This allows you to fetch a limited number of documents per page.
```
asyncfunctiongetTodosWithPagination(page=1, limit=10) {
consttodos=await Todo.find()
    .sort({ createdAt: -1 }) // Sort by 'createdAt' in descending order
    .skip((page -1) * limit) // Skip documents for the previous pages
    .limit(limit); // Limit the number of results per page
  console.log(todos); // Log the paginated results
}
getTodosWithPagination(1, 5); // Fetch the first 5 todos from page 1
```

## Final Thoughts
MongoDB offers a lot of flexibility, especially when dealing with unstructured or semi-structured data. It’s perfect for applications that need to scale horizontally or when the data structure is not rigid. Coming from an SQL background, it might take a little time to adjust to MongoDB’s dynamic nature, but once you do, you'll appreciate the freedom it offers.
By now, you should have a solid understanding of MongoDB basics and how it compares to SQL. You’ve learned about collections, documents, CRUD operations, data modeling, and even how to integrate MongoDB and mongoose with Node.js.
So, go ahead and explore further! Try building a small application
*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2022/generic-higher-order-component-in-react-using-typescript ---
Generic higher order component in react using typescript
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Generic higher order component in react using typescript
Mar 10 2022 (2 min read) 
* * *
In this blog, we are going to see how to create a generic higher order component in react using typescript.
A generic higher order component can be used in react to share codes between multiple component. For example, if we want **Profile** component to behave in one way when user is logged in and in other way when user is not logged in. The **Profile** component can be wrapped in a HOC **withLoggedInUser**.
In the example above, if user is logged in, we show the name of the user otherwise, we show a login button.
## Create **"Profile"** component
```
exportinterfaceIProfileProps {
// username is passed as props after wrapping with HOC
username:string;
// isLoggedIn is injected by the HOC component
isLoggedIn:boolean;
}
exportfunctionProfile({ username, isLoggedIn }:IProfileProps) {
return (
    <div>
{isLoggedIn ? (
        <p>username: {username} is logged in.</p>
      ) : (
        <p>Please Login In</p>
      )}
    </div>
  );
}
```

## Create **"withLoggedInUser"** component
```
exportconstwithLoggedInUser= <Textends {}>(
Component:React.ComponentType<T>
// we omit "isLoggedIn" props and only expose other props of the wrapped component
):React.FC<Props&Omit<T, 'isLoggedIn'>> => {
// withLoggedInUser injects isLoggedIn props to Component
constisLoggedIn=false;
return (props:Props) => {
return (
      <>
        <Component{...(props asunknownasT)}isLoggedIn={isLoggedIn} />
      </>
    );
  };
};
```

## Using the HOC component
```
// in app.tsx
constProfileWithLoggedInUser=withLoggedInUser<IProfileProps>(Profile)
functionApp() {
return (
    <ProfileWithLoggedInUserusername='baijanath'>
  )
}
```

*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2022/docker-containers-in-same-network ---
Docker containers in same network
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Docker containers in same network
Sep 27 2022 (1 min read) 
* * *
In this project, we are testing two containers in same network. We have following apps:
### Apps
  1. server - an Express app running on port 4444
  2. client - a NextJs app running on port 3000


### Build containers
  * Build client

```
docker build --build-arg NEXT_PUBLIC_BACKEND_URI=http://localhost:4444 -t client .
```

  * Build server

```
docker build -t server .
```

  * Create a network

```
docker network create test-common-net
```

### Running containers in same network
  * Run server

```
docker run -p 4444:4444 --net test-common-net --name server -d server
```

  * Run client

```
docker run -p 3000:3000 --net test-common-net --name client -d client
```

Github Link: [Docker containers in same network](https://github.com/baijanathTharu/containers-same-network)
*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2022/must-prefer-union-of-interfaces-to-interface-of-unions ---
Must prefer union of interfaces to interface of unions
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Must prefer union of interfaces to interface of unions
Jun 27 2022 (1 min read) 
* * *
Let us see a example:
```
interfaceGender {
title:'male'|'female';
clothing:MaleClothing|FemaleClothing;
}
interfaceMaleClothing {
// some properties...
}
interfaceFemaleClothing {
// some properties...
}
```

Here `Gender` interface is a interface of unions and it has few problems such as title can be `male` with clothing `FemaleClothing` and title can be `female` with clothing `MaleClothing`. So it is error prone. In such cases, we can prefer union of interfaces as below:
```
interfaceMale {
title:'male';
clothing:MaleClothing;
}
interfaceFemale {
title:'female';
clothing:FemaleClothing;
}
typeGender=Male|Female;
```

By using `union of interfaces`, we have eradicated the error that we had peviously.
*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2022/publish-ts-package-to-npm ---
How to publish a typescript package to npm?
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# How to publish a typescript package to npm?
Nov 11 2022 (2 min read) 
* * *
In this blog we are going to make a [`sum`](https://www.npmjs.com/package/@baijanaththaru/ts-sum) package.
  1. Initialize a npm project and a git and github repo

```
npm init
```

  * content of .gitignore file

```
node_modules
/lib
```

  1. Answer all the following questions shown in the image. ![image](https://user-images.githubusercontent.com/60652366/201106199-0a99a364-6795-4f8e-9b25-30e6b701fb6b.png)


After answering all the questions, a _package.json_ file will be created.
  1. Create a _README.md_ file.
  2. Install dev dependencies

```
npm install -D prettier tslint tslint-config-prettier typescript
```

  1. Create a _tsconfig.json_ file.

```
{
"compilerOptions": {
"target": "es5",
"module": "commonjs",
"declaration": true,
"outDir": "./lib",
"strict": true
  },
"include": ["src"],
"exclude": ["node_modules", "**/__tests__/*"]
}
```

  1. Create _src/index.ts_ file

```
exportconstsum= (...numbers:number[]) => {
let temp =0;
for (constnumof numbers) {
    temp += num;
  }
return temp;
};
```

  1. Add build, format, and lint command in _package.json_

```
{
"scripts": {
    "build": "tsc",
    "format": "prettier --write \"src/*.ts\"",
    "lint": "tslint -p tsconfig.json"
 }
}
```

  1. Add _files_ and _types_ in package.json

```
{
"files": [
"lib/**/*"
  ],
"types": "./lib/index.d.ts",
}
```

  * `files` are the folders that will be included in the published package.
  * `types` contains the typescript declarations.


  1. Run `build` command which will generate a `lib` directory that is included in the package.
  2. Add prepare, preversion, version and postversion commands in scripts.

```
{
"scripts": {
"prepare": "npm run build",
"prepublishOnly": "npm test && npm run lint",
"preversion": "npm run lint",
"version": "npm run format && git add -A src",
"postversion": "git push && git push --tags"
  }
}

```

  1. Login to npm

```
npm login
```

  1. Now we can publish public package using

```
npm publish --access public
```

  1. Add support for testing using vitest


  * Install vitest

```
npm install -D vitest
```

  * Create vitest config _vitest.config.ts_

```
import { defineConfig } from'vitest/config';
exportdefaultdefineConfig({
test: {
// ...
  },
});
```

  * Add test command in scripts.

```
{
"scripts": {
"test": "vitest"
  }
}
```

  * Create _**tests**_ directory inside src and make a _sum.test.ts_ file.

```
import { expect, test } from'vitest';
import { sum } from'../index';
test('testing sum', () => {
expect(sum(1, 2)).toBe(3);
expect(sum(2, 10)).toBe(12);
expect(sum(2, 5)).not.toBe(8);
expect(sum(1, 2, 3, 4, 5, 6, 7, 8, 100)).toBe(136);
});
```

  1. After writing the test, we can publish a new version by updating the version using `npm version` command. In this case, we are making patch version.

```
npm version patch
npm publish
```

_Repository link_ : [sum package by baijanath](https://github.com/baijanathTharu/ts-sum)
*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2022/authentication-workflow-using-access-token-and-refresh-token ---
Authentication workflow using access token and refresh token
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Authentication workflow using access token and refresh token
Mar 15 2022 (1 min read) 
* * *
This post shows the workflow of authentication using JWT tokens.
The access token should have short life while the refresh token can have long life.
## Signup flow
  1. Client sends client id and password to the server.
  2. Check if client already exists in the database or not.
  3. If client does not exist, password is hashed and user data is saved in the database.


## Login flow
  1. Client sends client id and password to the server.
  2. Check if client exists and password is correct.
  3. If password is correct, generate access token and refresh token.
  4. Send tokens to the client and store it as HTTP only cookie to prevent attackers from getting access to the token.


## Flow for other request
  1. Validate the access token. If access token is valid, the request is authenticated.
  2. If access token is not valid, validate the refresh token.
  3. If refresh token is not valid, logout the user.
  4. If refresh token is valid, generate new access token and refresh token and send to the client.


## Logout flow
  1. Invalidate the refresh token and access token.


*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2023/generate-filter-input-for-prisma ---
Generate filter input for prisma
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Generate filter input for prisma
July 25 2023 (3 min read) 
* * *
# [prisma-filter-generator](https://www.npmjs.com/package/@baijanstack/prisma-filter-generator)
The motivation behind creating this library is to simplify the structure of filter that we have to send from frontend to backend implemented with Prisma ORM.
The buildFilter function is a utility function designed to generate a filter structure based on the provided filter object. This filter structure can be used to query and filter data from database using prisma.
## Usage
  1. Install the dependency.

```
npm install @baijanstack/prisma-filter-generator
```

  * Import the dependencies in your project

```
import { IFilter, buildFilter } from'./build-filter';
```

  * Your filter input should satisfy the given interface.

```
exportinterfaceIFilter {
/**
   * field (optional): The field on which the filtering will be performed.
   */
field?:string;
/**
   * operator (optional): The comparison operator used for filtering the field.
   */
operator?:'gte'|'lte'|'equals'|'contains';
/**
   * value (optional): The value against which the field will be compared using the specified operator.
   */
value?:any;
/**
   * logicalOperator (optional): Specifies the logical operator used to combine multiple filters. It can be either 'AND' or 'OR'.
   */
logicalOperator?:'AND'|'OR';
/**
   * filters (optional): An array of nested IFilter objects used to create complex filter conditions.
   */
filters?:IFilter[];
}
```

  * Examples of filter input and their output.


### Simple Filter
#### Code
```
constfilter:IFilter= {
  field: 'name',
  operator: 'equals',
  value: 'John',
};
```

#### Output
```
{
name: {
equals: 'John',
  },
}
```

### Single Nested Filter
#### Code
```
constfilter:IFilter= {
  logicalOperator: 'AND',
  filters: [
    {
      field: 'age',
      operator: 'gte',
      value: 30,
    },
    {
      field: 'createdAt',
      operator: 'lte',
      value: '2022-02-01',
    },
  ],
};
```

#### Output
```
{
AND: [
    {
      age: {
        gte: 30,
      },
    },
    {
      createdAt: {
        lte: '2022-02-01',
      },
    },
  ],
}
```

### Complex Nested Filter
#### Code
```
constfilter:IFilter= {
  logicalOperator: 'AND',
  filters: [
    {
      field: 'author.name',
      operator: 'contains',
      value: 'John',
    },
    {
      logicalOperator: 'OR',
      filters: [
        {
          field: 'author.age',
          operator: 'gte',
          value: 30,
        },
        {
          logicalOperator: 'AND',
          filters: [
            {
              field: 'author.createdAt',
              operator: 'gte',
              value: '2022-01-01',
            },
            {
              field: 'author.createdAt',
              operator: 'lte',
              value: '2022-02-01',
            },
          ],
        },
      ],
    },
  ],
};
```

#### Output
```
{
AND: [
    {
      author: {
        name: { contains: 'John' },
      },
    },
    {
      OR: [
        {
          author: {
            age: {
              gte: 30,
            },
          },
        },
        {
          AND: [
            {
              author: {
                createdAt: {
                  gte: '2022-01-01',
                },
              },
            },
            {
              author: {
                createdAt: {
                  lte: '2022-02-01',
                },
              },
            },
          ],
        },
      ],
    },
  ],
}
```

### Some, none and every filter can be implemented using example below:
#### Code
```
constfilter:IFilter= {
  logicalOperator: 'AND',
  filters: [
    {
      field: 'posts.every.isPublished',
      operator: 'equals',
      value: true,
    },
  ],
};
```

#### Output
```
{
AND: [
    {
      posts: {
        every: {
          isPublished: {
            equals: true,
          },
        },
      },
    },
  ],
}
```

If you face any issues, feel free to create new issue at <https://github.com/baijanathTharu/baijanstack/issues>
*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2022/popular-blogs ---
Popular Blogs to Follow
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Popular Blogs to Follow
Jun 04 2022 (1 min read) 
* * *
### 1. [The Pragmatic Engineer](https://blog.pragmaticengineer.com/)
### 2. [khalilstemmler.com](https://khalilstemmler.com/)
### 3. [Kent C. Dodds](https://kentcdodds.com/blog)
### 4. [Refactoring](https://refactoring.com/)
### 5. [David Walsh](https://davidwalsh.name/)
*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2024/generators-in-js ---
Generators in Javascript
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Generators in Javascript
Sept 14 2024 (2 min read) 
* * *
I wanted to compare the timings of a search algorithms - linear and binary search in my machine. I tried to create a big array containing a billion numbers. I got heap out of memory limit.
The code to generate the required array is given below:
```
newArray(1e9).fill(0).map((_, idx) => idx);
```

If we try to run the above code, we will get `JavaScript heap out of memory`. The default memory limit of NodeJS is 1.5GB for a 64 bit systems. We can get around it by increasing the size of the memory.
In Javascript, numbers are typically represented as 64-bit floating-point numbers, which take 8 bytes of memory each.
So for a billion numbers, we can set the memory to:
> 1 billion * 8 bytes= 8 billion bytes (8GB)
I didn't want to increase the memory size.
Therefore, I had to look at the `generators` to solve my problem.
**Generators** are basically functions that allows to pause and resume their execution.
A simple generator looks like below:
```
function*twoNumberGenerator() {
yield1;
yield2;
}
constgen=simpleGenerator();
console.log(gen.next()); // { value: 1, done: false }
console.log(gen.next()); // { value: 2, done: false }
console.log(gen.next()); // { value: undefined, done: true }
```

The `twoNumberGenerator` function returns an iterator object. Iterator object has a `next` method. Whenever, we call it, the generator will yield us the values as shown above in the comments. When `done` becomes true, we come to know that the generator has ended its execution.
Taking the above code as an example, we can create an array containing a billion numbers.
```
function*generateNumbers(length) {
for (let i =0; i < length; i++) {
yield i;
  }
}
constbillionNumberGenerator=generateNumbers(1e9);
// we can process the numbers as below:
for (constnumof billionNumberGenerator) {
// we can process the `num` here
}
```

Now, I have an array of billion numbers, I can now go ahead with the comparison of the algorithms which I might write about in future blogs.
*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2022/async-react-select-field ---
Async react select field
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Async react select field
Sept 09 2022 (1 min read) 
* * *
  1. First create a react project and install `react-select` as a dependency.
  2. Make a Async component that fetches data from a [JSON placeholder](https://jsonplaceholder.typicode.com/photos?_page=1&_limit=5) as shown below.

```
import React, { Component } from'react';
import AsyncSelect from'react-select/async';
constLIMIT=10;
typePhoto= {
albumId:number;
id:number;
url:string;
thumbnailUrl:string;
};
asyncfunctionfetchPhotos(page:number):Promise<{
data:Array<Photo> |null;
error:string|null;
}> {
constres=awaitfetch(
`https://jsonplaceholder.typicode.com/photos?_page=${page}&_limit=${LIMIT}`
  );
constdata=await res.json();
if (res.status !==200) {
return {
      data: null,
      error: 'Something went wrong!',
    };
  }
return {
    error: null,
    data,
  };
}
asyncfunctionloadPhotoOptions(inputValue:string) {
const { data, error } =awaitfetchPhotos(1);
if (error) {
    console.log(error);
  }
constoptions= data.map((photo) => ({
    value: photo.id,
    label: photo.url,
  }));
return options;
}
exportfunctionAsyncPhotosSelect() {
return (
    <divstyle={{ marginTop: '10px' }}>
      <label>
{' '}
        Select Photo
        <AsyncSelect
name='photo'
cacheOptions
defaultOptions
loadOptions={loadPhotoOptions}
        />
      </label>
    </div>
  );
}
```

Try it yourself in a Repl: [Link](https://replit.com/@baijanathTharu/async-react-select#components/async-react-select.tsx)
*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2023/composition-in-react ---
Use Composition to get rid of props drilling in React
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Use Composition to get rid of props drilling in React
Feb 17 2023 (2 min read) 
* * *
### Passing props using props drilling
```
typeTProduct= {
id:number;
name:string;
price:number;
quantity:number;
};
typeTProps= {
product:TProduct;
};
functionOrder({ product }:TProps) {
return <div>Order Quantity: {product.quantity} </div>;
}
functionPayment({ product }:TProps) {
return <div>Payment Price: {product.price}</div>;
}
functionProductDetail({ product }:TProps) {
return (
    <div>
      <div>Product Id: {product.id}</div>
      <div>Product Name: {product.name}</div>
      <div>
        <Orderproduct={product} />
      </div>
      <div>
        <Paymentproduct={product} />
      </div>
    </div>
  );
}
functionProductComponent({ product }:TProps) {
return (
    <div>
      <h3>Product Component</h3>
      <ProductDetailproduct={product} />
    </div>
  );
}
functionfetchProduct() {
constproduct:TProduct= { id: 1, name: 'Laptop', quantity: 5, price: 1000 };
return product;
}
exportdefaultfunctionPropDrillingPage() {
constproduct=fetchProduct();
return (
    <div>
      <h2>Props Drilling</h2>
      <ProductComponentproduct={product} />
    </div>
  );
}
```

### Using Composition
```
import React from'react';
typeTProduct= {
id:number;
name:string;
price:number;
quantity:number;
};
typeTProps= {
product:TProduct;
};
functionOrder({ product }:TProps) {
return <div>Order Quantity: {product.quantity} </div>;
}
functionPayment({ product }:TProps) {
return <div>Payment Price: {product.price}</div>;
}
functionProductDetail({ product }:TProps) {
return (
    <div>
      <div>Product Id: {product.id}</div>
      <div>Product Name: {product.name}</div>
    </div>
  );
}
functionProductComponent({ children }: { children:React.ReactNode }) {
return <div>{children}</div>;
}
ProductComponent.displayName ='Product';
ProductDetail.displayName ='Product.Detail';
Order.displayName ='Product.Order';
Payment.displayName ='Product.Payment';
constProduct= Object.assign(ProductComponent, {
  Detail: ProductDetail,
  Order: Order,
  Payment: Payment,
});
functionfetchProduct() {
constproduct:TProduct= { id: 1, name: 'Laptop', quantity: 5, price: 1000 };
return product;
}
exportdefaultfunctionPropDrillingPage() {
constproduct=fetchProduct();
return (
    <div>
      <h2>Composition</h2>
      <Product>
        <Product.Detailproduct={product} />
        <Product.Orderproduct={product} />
        <Product.Paymentproduct={product} />
      </Product>
    </div>
  );
}

```

*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2023/permission-based-authorization-in-graphql-using-graphql-rp-directive ---
Permission Based Authorization in Graphql using graphql-rp-directive
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Permission Based Authorization in Graphql using graphql-rp-directive
July 08 2023 (2 min read) 
* * *
[**@baijanstack/graphql-rp-directive**](https://www.npmjs.com/package/@baijanstack/graphql-rp-directive) is a package published by me. It uses custom directives in order to apply authorization in graphql. We can do field level authorization using permissions and roles.
## Usage
  1. Install the dependency.

```
npm install @baijanstack/graphql-rp-directive
```

  1. Update your typedefs with the necessary directive.

```
consttypedefs=gql`
  directive @hasPermission(permissions: [String!]) on FIELD_DEFINITION | OBJECT
  # your other typedefs
  # ...
`;
```

  1. Create your role and permission data.

```
import {
  getAuthorizedSchema,
  TRolePermission,
} from"@baijanstack/graphql-rp-directive";
constrolePermissionsData:TRolePermission= {
  ADMIN: {
    permissions: [
"READ_SECURE_DATA",
"READ_RESTRICTED_FIELD",
"READ_MUTATION_RESPONSE",
"CREATE_FIELD",
    ],
  },
  PUBLIC: {
    permissions: ["READ_MUTATION_RESPONSE"],
  },
};
```

  1. Create your executable schema with your typedefs and resolvers.

```
constschema=makeExecutableSchema({
  typeDefs,
  resolvers,
});
```

  1. Add the permission directives to your schema.

```
constschemaWithPermissionDirective=getAuthorizedSchema(schema, {
  rolePermissionsData,
});
```

  1. Pass `schemaWithPermissionDirective` as schema to your graphql server and return the `user` object from the context.

```
constserver=newApolloServer<{
user: {
roles:Array<string>;
  };
}>({
  schema: schemaWithPermissionDirective,
  context: {
    user: {
      roles: ["PUBLIC"],
    },
  },
});
```

  1. By default, all your resolvers request will be denied unless you specify the directive on the field or object.
  2. Apply directives to your typedefs.

```
consttypeDefs=`
directive @hasPermission(permissions: [String!]) on FIELD_DEFINITION | OBJECT
type Query {
  # this api will be denied request because it is missing the directive
  publicFields: PublicField
  restrictedFields: RestrictedField @hasPermission(permissions: ["READ_RESTRICTED_FIELD"])
  secureFields: SecureField @hasPermission(permissions: ["READ_SECURE_DATA"])
}
type PublicField {
  name: String!
}
type RestrictedField {
  name: String!
}
type SecureField @hasPermission(permissions: ["READ_SECURE_DATA"]) {
  name: String!
  email: String!
}
type Mutation {
  createFields(id: Int!): MutationResponse! @hasPermission(permissions: ["CREATE_FIELD"])
}
type MutationResponse @hasPermission(permissions: ["READ_MUTATION_RESPONSE"]) {
  done: Boolean!
}
`;
```

*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2022/types-that-always-represent-valid-states ---
Types that always represent valid states
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Types that always represent valid states
Jun 10 2022 (1 min read) 
* * *
We must design our types in such a way that the type must represent the valid states. If our type does not represent valid state, then it brings complexity in implementing functions using those types.
For example:
  * If we design a interface for a web page, that has pageName, isLoading and error fields. The interface that we have chosen allows both isLoading and error state to be set at the same time because of which we have complexity in implementing the functions as shown in the code below:

```
interfacePageState {
pageName:string;
isLoading?:boolean;
error?:string;
}
asyncfunctionchangePage(page:PageState) {
  page.isLoading =true;
try {
constnewPage=awaitgetPage(page.pageName);
    console.log('newPage', newPage);
// here we forgot to reset the isLoading state and error state
  } catch (e) {
    page.error =JSON.stringify(e);
    console.log('error', page.error);
// here we forgot to reset the isLoading state
  }
}
asyncfunctiongetPage(pageName:string) {
returnnewPromise((resolve, reject) => {
constrand= Math.floor(Math.random() *5);
if (rand >2) {
reject('something went wrong');
    } else {
resolve(pageName);
    }
  });
}
changePage({
  pageName: 'home',
});
```

If you want to play with the code: [Repl Link](https://replit.com/@baijanathTharu/Designing-types-in-typescript#validState.ts)
*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2022/setup-express-with-typescript-eslint-prettier-and-husky ---
Setup express with typescript, eslint, prettier and husky
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Setup express with typescript, eslint, prettier and husky
Mar 03 2022 (2 min read) 
* * *
In this article, we are going to setup an express project with typescript, eslint, prettier and husky.
### Setup typescript
**Initialize the project**
```
npm init
```

**Install typescript dependencies**
```
npm i -D typescript ts-node
```

**Create tsconfig.json**
```
npx tsc --init
```

**Add command in package.json to build and start the project**
```
{
"build": "tsc",
"start": "nodemon"
}
```

**Use nodemon to start the project**
```
// in nodemon.json file
{
"watch": ["src"],
"ext": ".ts",
"ignore": [],
"exec": "node --loader ts-node/esm ./src/index.ts"
}
```

### Setup eslint
```
npx eslint --init
```

Choose answers to the questions and eslint config will be generate.
In package.json file, add command for linting
```
{
"scripts": {
"lint": "eslint --ext .ts src/**/*.ts"
  }
}
```

### Setup prettier
```
npm i -D prettier eslint-config-prettier
```

**Create .prettierrc.js file for config**
```
module.exports= {
  printWidth: 80,
  semi: true,
  singleQuote: true,
  tabWidth: 2,
  useTabs: false,
};
```

In eslint config, extend the plugin with prettier
**Add following command in scripts of package.json**
```
{
"scripts": {
"format": "prettier --write src/**/*.ts"
  }
}
```

### Setup husky for formatting
```
npm i -D pretty-quick
```

pretty-quick will format our code before committing.
**Initialize husky**
```
npx husky-init && npm install
```

This will generate a pre-commit hook, in which **npm test** command is present. We can change this command as our requirement. In this case, we change it to be **npm run format-quick**
In package.json, we have to add command for pretty-quick formatting.
```
"scripts": {
"format-quick": "pretty-quick --staged"
}
```

### Create server
**Create a file in src/index.ts**
```
import express, { Application, Request, Response, NextFunction } from'express';
constapp:Application=express();
constport=5000;
app.use('/', (req:Request, res:Response, next:NextFunction) => {
  res.status(200).send({ data: 'Hello World!' });
});
// Start server
app.listen(port, () => console.log(`Server is listening on port ${port}!`));
```

Now, we can start building our project from here.
*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2024/design-principles ---
Design Principles Every Software Developer Should Know
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Design Principles Every Software Developer Should Know
Sept 09 2024 (13 min read) 
* * *
Design paterns keep our code bases maintainable and understandable. This post explains few design patterns that every software developer should know.
  * ## Dry (Don't Repeat Yourself)


Avoid code duplication using this pattern.
> A bad example
```
functionaddTodo(name:string, isCompleted:boolean) {
// code to add todo
  console.log(`Adding todo - name: ${name} | isCompleted: ${isCompleted}`);
}
functiondeleteTodo(id:number) {
// code to delete todo
  console.log(`Deleting todo - id: ${id}`);
}
```

In this example, we are logging the actions in the console which is duplicated. If we decide to use other library for logging, then we have to change a lot of code which is not a good practice.
We will use an example of a Todo application to explain these patterns.
> A good example
```
functiontodoLogger(action:string) {
  console.log(`Action: ${action}`);
}
functionaddTodo(name:string, isCompleted:boolean) {
// code to add todo
todoLogger(`Adding todo - name: ${name} | isCompleted: ${isCompleted}`);
}
functiondeleteTodo(id:number) {
// code to delete todo
todoLogger(`Deleting todo - id: ${id}`);
}
```

Here we are using the `todoLogger` function to log the actions. If we decide to use other library for logging, then we have to only change the `todoLogger` function.
  * ## KISS (Keep It Simple, Stupid)


This principle is used to keep our code simple and easily understandable.
> A bad example
```
functiontoggleTodoStatus(todo: {
id:number;
name:string;
isCompleted:boolean;
}) {
if (todo.isCompleted) {
    todo.isCompleted =false;
  } else {
    todo.isCompleted =true;
  }
}
```

Here, we are toggling the status of the todo using if-else. There are two branches in the if-else which becomes very lengthy.
> A good example
```
functiontoggleTodoStatus(todo: {
id:number;
name:string;
isCompleted:boolean;
}) {
  todo.isCompleted =!todo.isCompleted;
}
```

Here, we are toggling the status of the todo using ternary operator which is more readable.
  * ## YAGNI (You Ain't Gonna Need It)


This principle is used to avoid unnecessary code. You should not add codes that you think you might need in the future because in most of the cases you don't need it.
For e.g. you might think you need feature to track the status of the todo. But in most of the cases you don't need it. When you need it, you can always write it at that moment.
> A bad example
```
// not required at this moment
functiontrackTodoStatus(todo: {
id:number;
name:string;
isCompleted:boolean;
}) {
// code to track the status of the todo
}
functiontoggleTodoStatus(todo: {
id:number;
name:string;
isCompleted:boolean;
}) {
// code to toggle the status of the todo
trackTodoStatus(todo);
}
```

> A good example
```
functiontoggleTodoStatus(todo: {
id:number;
name:string;
isCompleted:boolean;
}) {
// code to toggle the status of the todo
// have removed the tracking code
}
```

  * ## Solid Principles


These principles are mostly used in Object Oriented Programming.
  1. **Single Responsibility Principle**


In this principle, a class should have only one reason to change.
> A bad example
```
typeTodo= {
id:number;
name:string;
isCompleted:boolean;
};
classTodoService {
todos:Todo[] = [];
addTodo(name:string, isCompleted:boolean) {
// code to add todo
  }
deleteTodo(id:number) {
// code to delete todo
  }
renderTodos() {
// code to render todos
  }
// ... other methods
}
```

Here `TodoService` class has two reasons to change - one when we need to add methods related to data persistence and other when need to change the rendering logic.
> A good example
```
typeTodo= {
id:number;
name:string;
isCompleted:boolean;
};
classTodoService {
todos:Todo[] = [];
addTodo(name:string, isCompleted:boolean) {
// code to add todo
  }
deleteTodo(id:number) {
// code to delete todo
  }
// ... other methods
}
classTodoRenderer {
todos:Todo[] = [];
renderTodos() {
// code to render todos
  }
// ... other methods
}
```

  1. **Open/Closed Principle**


In this principle, a class should be open for extension but closed for modifications.
For e.g. if we have new requirement to add a priority status to our todos, we can do as below.
> A bad example
```
classTodo {
id:number;
name:string;
isCompleted:boolean;
priority:string;
constructor(id:number, name:string, isCompleted:boolean) {
this.id = id;
this.name = name;
this.isCompleted = isCompleted;
  }
// have added new feature directly in the `Todo` class
setPriority(priority:string) {
this.priority = priority;
  }
}
```

What we have done is we added a priority field in our existing `Todo` class. This violates the Open/Closed Principle.
> A good example
```
classTodoBase {
constructor(
publicid:number,
publicname:string,
publicisCompleted:boolean
  ) {}
// ... other methods
}
classPriorityTodoextendsTodoBase {
constructor(
publicid:number,
publicname:string,
publicisCompleted:boolean,
publicpriority:string
  ) {
super(id, name, isCompleted);
  }
}
```

Here, we have created a new class `PriorityTodo` which extends the `TodoBase` class. This is a good example of the Open/Closed Principle.
  1. **Liskov Substitution Principle**


We should be able to substitute a base class with its subclass.
For e.g. in open/closed principle, we can replace the `Todo` class with `PriorityTodo` class without breaking our application.
```
// ... codes from open/closed principle
consttodos:TodoBase[] = [
newTodo(1, "Todo 1", false),
newPriorityTodo(2, "Todo 2", false, "High"),
];
```

  1. **Interface Segregation Principle**


A class should not depend on interfaces that it does not use.
> A bad example
```
interfaceTodoManager {
addTodo: (name:string, isCompleted:boolean) =>void;
deleteTodo: (id:number) =>void;
renderTodos: () =>void;
}
classTodoServiceimplementsTodoManager {
addTodo(name:string, isCompleted:boolean) {
// code to add todo
  }
deleteTodo(id:number) {
// code to delete todo
  }
renderTodos() {
// code to render todos
  }
}
```

Here, we have created a class `TodoService` which implements `TodoManager` interface. The interface `TodoManager` contains two types of methods - one related to persistence and other related to rendering. This violates the Interface Segregation Principle.
> A good example
```
interfaceTodoManager {
addTodo: (name:string, isCompleted:boolean) =>void;
deleteTodo: (id:number) =>void;
}
interfaceTodoRenderer {
renderTodos: () =>void;
}
classTodoServiceimplementsTodoManager, TodoRenderer {
addTodo(name:string, isCompleted:boolean) {
// code to add todo
  }
deleteTodo(id:number) {
// code to delete todo
  }
renderTodos() {
// code to render todos
  }
}
```

Here, we have created a class `TodoService` which implements `TodoManager` and `TodoRenderer` interface. Now, the `TodoService` class only depends on `TodoManager` and `TodoRenderer` interface. If we don't want the rendering methods in the `TodoService` class, we can remove `TodoRenderer` interface from `TodoService` class.
  1. **Dependency Inversion Principle**


A high level module should not depend on low level modules. Both should depend on abstractions.
For e.g. `TodoService` class should depend on the low level data persistence class `TodoRepository` using an abstraction (Dependency Injection).
```
interfaceTodoRepository {
save(todo:Todo):void;
}
classTodoService {
constructor(privatetodoRepository:TodoRepository) {}
addTodo(name:string, isCompleted:boolean) {
this.todoRepository.save(newTodo(name, isCompleted));
  }
// ... other methods
}
```

  * ## Separation of Concerns


Keep different concerns separate.
For e.g. presentational logic should not be mixed with the business logic otherwise the app will become unmaintainable in no time.
```
classTodoModel {
constructor(publicname:string, publicisCompleted:boolean) {}
// ... this class should only have code related to data manipulation
save() {
// ... code to save the todo
  }
}
classTodoLogger {
// ... this class should only have code related to logging
trackTodoStatus(todo:TodoModel) {
// ... code to track the status of the todo
this.logTodoStatus(todo);
  }
logTodoStatus(todo:TodoModel) {
// ... code to log the status of the todo
    console.log(`Todo name: ${todo.name} | isCompleted: ${todo.isCompleted}`);
  }
}
classTodoController {
// ... this class should only have business logic
addTodo(name:string, isCompleted:boolean) {
consttodo=newTodoModel(name, isCompleted);
    todo.save();
todoLogger(todo);
  }
}
classTodoView {
// ... this class should only have presentational logic
todos:TodoModel[] = [];
renderTodos() {
// ... code to render todos
  }
}
```

  * ## Modularity


An improvement to the above pattern is to use modules. In this case, we can separate concerns using modules.
For e.g. `TodoModel` and `TodoLogger` should be in separate modules. Each module should be responsible for a specific task. We can create a library for a particular task and can be maintained by the team.
If you have a very small team, maintainability of separate modules would be very difficult. Separating concerns in modules is quite challenging and requires a lot of time.
  * ## Encapsulation


You need to hide the implementation details of a class. To do this, you can use encapsulation.
```
classTodoLogger {
privatelogTodoStatus(todo:TodoModel) {
// ... code to log the status of the todo
    console.log(`Todo name: ${todo.name} | isCompleted: ${todo.isCompleted}`);
  }
trackTodoStatus(todo:TodoModel) {
// ... code to track the status of the todo
this.logTodoStatus(todo);
  }
}
classTodoController {
constructor(privatetodoLogger:TodoLogger) {}
addTodo(name:string, isCompleted:boolean) {
consttodo=newTodoModel(name, isCompleted);
    todo.save();
    todoLogger.trackTodoStatus(todo);
  }
}
```

The user of the class should not be able to access the implementation details of the class. The user should have no concern if it logs to the console or some other external storage.
Here, `TodoController` does not care about the implementation details of `TodoLogger`. It only cares about the `trackTodoStatus` method.
  * ## Compositon Over Inheritance


There are a lot of disadvantages of using inheritance. One of them is that the child class is tightly coupled to the parent class. This means that the child class is not reusable. Also, the child class has to implement all the methods of the parent class. If the parent class is very complex, then the child class will become very complex as well.
In this case, we can use composition. Composition is a technique that allows us to create a class that is a composition of other classes.
For e.g. `TodoService` should be a composition of `TodoRepository` and `TodoLogger` using dependency injection.
```
interfaceTodoRepository {
save(todo:Todo):void;
// ... other methods
}
interfaceTodoLogger {
trackTodoStatus(todo:Todo):void;
// ... other methods
}
classTodoService {
constructor(
privatetodoRepository:TodoRepository,
privatetodoLogger:TodoLogger
  ) {}
addTodo(name:string, isCompleted:boolean) {
consttodo=newTodo(name, isCompleted);
this.todoRepository.save(todo);
this.todoLogger.trackTodoStatus(todo);
  }
}
```

  * ## Cohension and Coupling


Cohension refers to how closely related two classes are. Coupling refers to how tightly related two classes are.
For e.g. `Todo` and `PriorityTodo` are tightly related. `PriorityTodo` is tightly coupled to `Todo` class. Whereas `TodoController` is loosely coupled to `TodoLogger`.
```
classTodo {
constructor(
publicid:number,
publicname:string,
publicisCompleted:boolean
  ) {}
}
classPriorityTodoextendsTodo {
constructor(
publicid:number,
publicname:string,
publicisCompleted:boolean,
publicpriority:string
  ) {}
// ... other methods
}
classTodoLogger {
trackTodoStatus(todo:Todo) {
// ... code to track the status of the todo
  }
}
classTodoController {
constructor(privatetodoLogger:TodoLogger) {}
addTodo(name:string, isCompleted:boolean, priority:string) {
consttodo=newPriorityTodo(1, name, isCompleted, priority);
this.todoLogger.trackTodoStatus(todo);
  }
}
```

  * ## Inversion of Control (IoC)


IoC means that high level modules should not depend on low level modules. Both should depend on abstractions. It is similar to Dependency Inversion Principle that we discussed in the Solid principles.
  * ## Fail-Fast


This means all the checks should be handled at the beginning of the code.
For e.g. `addTodo` function should only be called if the `todo` is valid.
```
functionaddTodo(name:string, isCompleted:boolean) {
// validate the todo
constisValid=isTodoValid(name, isCompleted);
if (!isValid) {
thrownewError("Invalid todo");
  }
// ... code to add todo
}
```

  * ## Principle of Least Astonishment


The code should be as simple as possible. User should not be surprised by `addTodo` function. The `addTodo` function should only add the todo if it is valid and should not toggle the status of the todo.
> A bad example
```
functionaddTodo(name:string, isCompleted:boolean) {
// ... code to add todo
constisValid=isTodoValid(name, isCompleted);
if (!isValid) {
thrownewError("Invalid todo");
  }
// ... code to toggle the status of the todo
toggleTodoStatus(todo);
}
```

> A good example
```
functionaddTodo(name:string, isCompleted:boolean) {
// ... code to add todo
constisValid=isTodoValid(name, isCompleted);
if (!isValid) {
thrownewError("Invalid todo");
  }
// code to add the todo and there should not be any code to toggle the status of the todo or any other surprises.
}
```

  * ## Convention Over Configuration


In order to keep our code simple and maintainable, we can use convention over configuration.
For e.g. we can provide default values to our properties if they are not provided by the user.
```
functionaddTodo(name:string, isCompleted=false) {
// ... code to add todo
}
```

Instead of making isCompleted required, we can provide a default value as false as whenever a todo is created it is not completed. If we want to opt to configuration for such cases, it would become more complex.
  * ## Idempotency


Idempotency refers to a property that is always the same. This is very useful when we want to add a todo and toggle the status of the todo.
For e.g. `addTodo` function should always add the same todo no matters how many times it is called. `toggleTodoStatus` function should always toggle the status of the todo no matter how many times it is called.
```
functionaddTodo(name:string, isCompleted:boolean) {
  todo =newTodo(name, isCompleted);
newTodoRepository().save(todo);
}
functiontoggleTodoStatus(todo: {
id:number;
name:string;
isCompleted:boolean;
}) {
  todo.isCompleted =!todo.isCompleted;
}
```

  * ## Orthogonality


Orthogonality refers to the fact whenever a part of the code is changed, it should not affect other parts of the code. It is similar to the `Separation of Concerns` principle or the `Single Responsibility Principle`.
  * ## Avoid Premature Optimization


You should write a code that works as fast as possible. You can always optimize it later. However, if the code that you are writing needs to be fast, then it is better to write optimize it first.
For e.g. if you have to get all todos to show on a table which has pagination, then it is better to write it first and then optimize it later. But if you want to generate a report for all todos it is better to write it in a optimized way in the beginning itself.
  * ## Code for the Maintainer


**You should have empathy towards the maintainer when you are writing a code. You should keep yourself in the shoes of the maintainer. You should write good documentations and update the documentation as and when needed.**
  * ## Testability


You should write code that is easy to test. A code that does not follow any pattern or rule should not be written. You can follow the principles/patterns that we discussed earlier to write a testable code.
  * ## Use Meaningful Names


A code is maintainable if it has meaningful names. A meaningful name is a name that describes the purpose of the code. For e.g. `addTodo` function should be called `addTodo` and `toggleTodoStatus` function should be called `toggleTodoStatus`.
If you call `addTodo` as `add` and `toggle` then it is not maintainable. The name is vague and it takes a lot of thinking to understand the purpose of the code.
There are few rules to follow when naming a code.
  * It is better understood when a function is named with a verb. For e.g. `addTodo` function should start with `add` and `toggleTodoStatus` function should be called `toggle`.
  * It is better understood when a variable is named with a noun. For e.g. `todo` variable should be called `todo` instead of `t` or `t1`.
  * It is better understood when singular and plural form of a noun is used for single and multiple objects. For e.g. `todos` should be called `todos` and `todo` should be called `todo`.
  * Similary for a boolean value. For e.g. in order to track the completion status of a todo we can name the variable as `isCompleted` instead of `completed`.
  * ## Use Patterns, but Don't Overuse Them


The patterns that we discussed are very useful in writing maintaiable and easily understandable code. But we should be pragmatic about how much and what principles we need depending on the project and the team we are working with.
*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2023/setup-dockerized-development ---
Setup dockerized development with frontend, backend and database
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Setup dockerized development with frontend, backend and database
May 06 2023 (1 min read) 
* * *
Github Link: [sample-monorepo-with-yarn](https://github.com/baijanathTharu/sample-monorepo-with-yarn)
We are using NextJS on the frontend, ExpressJS on the backend, postgres as database and prisma to query the database.
`docker-compose.yml`
```
version: "3"
services:
  frontend:
    build:
      context: ./frontend
      target: DEV
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=development
      - NEXT_PUBLIC_BACKEND_URL=http://localhost:8080
    command: >
      sh -c "cd frontend && yarn dev"
    networks:
      - sample_monorepo
    volumes:
      - .:/src
  db:
    image: postgres:13
    restart: on-failure
    ports:
      - "5433:5432"
    environment:
      - POSTGRES_USER=root
      - POSTGRES_PASSWORD=admin
      - POSTGRES_DB=sample_monorepo
    volumes:
      - ./db:/var/www/html
    networks:
      - sample_monorepo
  backend:
    build:
      context: ./backend
      target: DEV
    restart: on-failure
    depends_on:
      - db
    ports:
      - "8080:8080"
    command: >
      sh -c "cd backend && yarn dev"
    environment:
      - NODE_ENV=development
      - PORT=8080
      - WHITELISTED_ORIGIN=http://localhost:3000
      - DATABASE_URL=postgresql://root:admin@db/sample_monorepo?schema=public
    networks:
      - sample_monorepo
    volumes:
      - .:/src
networks:
  sample_monorepo:
    driver: bridge

```

`Dockerfile` for frontend
```
FROM node:18-alpine as DEV
WORKDIR /src
ENV NODE_ENV=development
ARG NEXT_PUBLIC_BACKEND_URL
COPY package.json ./
COPY yarn.lock ./
COPY next.config.js ./
RUN yarn install
COPY . .
EXPOSE 3000
CMD [ "yarn", "dev" ]
```

`Dockerfile` for backend
```
FROM node:18-alpine as DEV
WORKDIR /src
ENV NODE_ENV=development
COPY package.json ./package.json
COPY yarn.lock ./yarn.lock
COPY prisma prisma
RUN yarn install
# Generate prisma client
RUN yarn g
COPY . .
EXPOSE 8080
CMD [ "yarn", "dev" ]
```

*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2022/async-and-sync-behavior-of-code ---
Async and sync behavior of code
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Async and sync behavior of code
Jun 05 2022 (2 min read) 
* * *
Repl Link: [Async and sync behavior of code](https://replit.com/@baijanathTharu/Async-and-sync-behavior-of-code)
This post is used to learn about the difference in `async` and `sync` behavior of code.
### Sync Behavior
  * Without `async call`, the count of unchecked boxes is tracked correctly.

```
import Link from'next/link';
import { useState } from'react';
constNUMBER_OF_CHECKBOX=5;
exportdefaultfunctionIndexPage() {
const [unchecked, setUnchecked] =useState(NUMBER_OF_CHECKBOX);
constonChange= (e) => {
constisChecked= e.target.checked;
if (isChecked) {
setUnchecked((unchecked) => (unchecked ===0?0: unchecked -1));
    } else {
setUnchecked((unchecked) => unchecked +1);
    }
  };
return (
    <div>
      <Linkhref='/'>
        <astyle={{ color: 'blue' }}>Home</a>
      </Link>
      <div>
        <h3>Sync Behavior</h3>
        <p>Number of unchecked: {unchecked}</p>
{newArray(NUMBER_OF_CHECKBOX).fill(0).map((_, index) => {
constcount= index +1;
return (
            <div>
              <label>Checkbox: {count}</label>
              <inputtype='checkbox'name={count}onChange={onChange} />
            </div>
          );
        })}
      </div>
    </div>
  );
}
```

### Async Behavior
  * With `async call`, it takes some time to synchronize the count of the unchecked boxes.

```
import Link from'next/link';
import { useState } from'react';
constNUMBER_OF_CHECKBOX=5;
constresolveAfter= (timeInSeconds, cb) => {
returnnewPromise((resolve, reject) => {
setTimeout(() => {
cb();
resolve('done');
    }, timeInSeconds *1000);
  });
};
exportdefaultfunctionAsyncPage() {
const [unchecked, setUnchecked] =useState(NUMBER_OF_CHECKBOX);
constcheckOrUnCheck= (isChecked) => {
if (isChecked) {
setUnchecked((unchecked) => (unchecked ===0?0: unchecked -1));
    } else {
setUnchecked((unchecked) => unchecked +1);
    }
  };
constonChange= (e) => {
constisChecked= e.target.checked;
resolveAfter(1, () =>checkOrUnCheck(isChecked));
// Bug here: this block of code is called when the number of unchecked boxes on the UI is not 0.
if (unchecked ===0) {
alert('This is a bug');
    }
  };
return (
    <div>
      <Linkhref='/'>
        <astyle={{ color: 'blue' }}>Home</a>
      </Link>
      <div>
        <h3>Async Behavior</h3>
        <p>Number of unchecked: {unchecked}</p>
{newArray(NUMBER_OF_CHECKBOX).fill(0).map((_, index) => {
constcount= index +1;
return (
            <div>
              <label>Checkbox: {count}</label>
              <inputtype='checkbox'name={count}onChange={onChange} />
            </div>
          );
        })}
      </div>
    </div>
  );
}
```

Therefore, we need to give more attention whenever we are dealing with such conditions. This condition is a source of many bugs in our code.
*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2022/must-know-concepts-to-master-javascript ---
Must know concepts to master Javascript
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Must know concepts to master Javascript
Jun 15 2022 (1 min read) 
* * *
One must know following concepts in order to master Javascript.
  1. [Hoisting](https://www.programiz.com/javascript/hoisting)
  2. [Scope](https://www.programiz.com/javascript/variable-scope)
  3. IIFE and Closures
  4. Prototype and Class
  5. Memoization
  6. Currying
  7. Callback and Asynchronous Javascript
  8. Polymorphism in Javascript
  9. [Event loop](https://www.scaler.com/topics/javascript/event-loop-in-javascript/)


*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2022/audit-the-npm-dependencies ---
Audit the npm dependencies
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Audit the npm dependencies
Aug 04 2022 (1 min read) 
* * *
`npm` CLI offers us a [npm-audit](https://docs.npmjs.com/cli/v7/commands/npm-audit) command in order to perform security audit of our project dependencies. When `npm audit` command is run, it scans our dependencies tree and report vulnerabilities along with their remedies if any. If you provide the `fix` argument then npm will try to apply the remedies.
  * The audit command will exit with code 0 if no vulnerabilities are found and with non zero code if vulnerabilities are not found.
  * There are two audit end points in order to fetch vulnerabilities informations:
    * Bulk Advisory: Pretty fast end point
    * Quick Audit: Slower than bulk advisory and it is only called when bulk advisory returns some error and invalid data.
  * Uses:

```
# Scan your project for vulnerabilities and automatically install any compatible updates to vulnerable dependencies
npm audit fix
# Fix without modifying the node_modules and only updating the package-lock.json
npm audit fix --package-lock-only
# Force fix i.e. update to major sem-versions
npm audit fix --force
# Perform a dry run which generate a json output
npm audit fix --dry-run --json
# Set audit-level to moderate
npm audit --audit-level=moderate
```

*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2022/generate-change-logs-from-conventional-commits ---
Generate change logs from conventional commits
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Generate change logs from conventional commits
Apr 02 2022 (1 min read) 
* * *
We can generate change logs from our commits if we follow the principles of [conventional commits](https://www.conventionalcommits.org/en/v1.0.0-beta.4/).
We can use [standard-version](https://github.com/conventional-changelog/standard-version) to automatically generate change logs(uses conventional commits) and version our code(uses semver).
## Setup **standard-version**
  1. Install standard-version

```
npm i --save-dev standard-version
```

  1. Add release script in **package.json**

```
{
"scripts": {
"release": "standard-version"
  }
}
```

  1. Generate first release

```
npm run release -- --first-release
```

  1. For subsequent releases

```
npm run release
# can add **tags** option to generate tag
```

*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/projects ---
Baijan.
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


## express-auth
Auth ExpressJS
A ExpressJS library supporting tokens based auth
[ View on npm ](https://www.npmjs.com/package/@baijanstack/express-auth?activeTab=readme)
## graphql-rp-directive
Graphql NodeJS Authorization
A library for authorization in Graphql using directives.
[ View on npm ](https://www.npmjs.com/package/@baijanstack/graphql-rp-directive)
*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/2025/naming-is-hard ---
Naming is hard
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# Naming is hard
Apr 20 2025 (3 min read) 
* * *
# Naming is Hard: A Survival Guide for JavaScript Developers
Let’s be honest: naming things in code is hard. Like, really hard. If you’ve ever stared at your screen for 10 minutes trying to decide between `data`, `info`, or `thingy`, you’re not alone. I’ve been there, and so has every developer who’s ever written more than three lines of code. But here’s the thing: good names matter—a lot. Bad names are like banana peels in your codebase, just waiting for someone (maybe future you) to slip on them.
## Why Bother With Good Names?
Imagine you’re reading a book where every character is named Bob. Confusing, right? Code is the same. Good names make your code readable, maintainable, and less likely to make you want to throw your laptop out the window.
## Variables: The Usual Suspects
**Bad:**
```
let x =42;
let foo =getData();
let temp = userInfo;
```

**Good:**
```
let userAge =42;
let userProfile =getUserProfile();
let userInfo = currentUserInfo;
```

**Why?**
  * `x` tells you nothing. `userAge` tells you exactly what it is.
  * `foo` is only good for placeholder jokes. `userProfile` is clear.
  * `temp` is only useful if you’re actually storing temperature.


## Functions: What Does This Even Do?
**Bad:**
```
functionhandle() {
/* ... */
}
functiondoStuff(a, b) {
/* ... */
}
functionprocess() {
/* ... */
}
```

**Good:**
```
functionhandleUserLogin() {
/* ... */
}
functioncalculateTotalPrice(cartItems) {
/* ... */
}
functionprocessPayment(order) {
/* ... */
}
```

**Why?**
  * A function name should say what it does. `doStuff` does not.
  * Be specific! `handleUserLogin` is much better than `handle`.


## Classes: Not Just Fancy Functions
**Bad:**
```
classData {}
classManager {}
classThing {}
```

**Good:**
```
classUser {}
classCartManager {}
classEmailService {}
```

**Why?**
  * `Thing` is not a thing. `User` is.
  * `Manager` of what? Be explicit: `CartManager`.


## Files: The First Thing You See
**Bad:**
```
utils.js
data.js
stuff.js
```

**Good:**
```
formatDate.js
userController.js
cartUtils.js
```

**Why?**
  * `utils.js` could be anything. `formatDate.js` is clear.
  * File names should match what’s inside.


## Constants and Magic Numbers
**Bad:**
```
consta=3.14;
constb=86400;
```

**Good:**
```
constPI=3.14;
constSECONDS_IN_A_DAY=86400;
```

**Why?**
  * `a` and `b` are mysterious. `PI` and `SECONDS_IN_A_DAY` are not.


## General Tips for Naming
  * Be descriptive, not verbose. `userEmail` is good. `theEmailAddressOfTheUser` is too much.
  * Use common conventions. For booleans, use `is`, `has`, `can` (e.g., `isActive`, `hasPermission`).
  * Avoid abbreviations unless they’re obvious (`id`, `URL`, `API` are fine).
  * Don’t be afraid to rename things as your code evolves. Refactoring is your friend.
  * If you can’t think of a good name, ask a teammate or take a break. Inspiration often strikes when you’re not looking.


## Practical Naming Rules to Live By
  1. **Name for intent, not type.**
     * Bad: `list`, `arr`, `str`
     * Good: `userList`, `cartItems`, `emailAddress`
  2. **Use consistent casing.**
     * Variables/functions: `camelCase` (`userName`, `getUserInfo`)
     * Classes: `PascalCase` (`UserProfile`)
     * Constants: `UPPER_SNAKE_CASE` (`MAX_RETRIES`)
  3. **Avoid generic words.**
     * Bad: `data`, `info`, `object`
     * Good: `orderData`, `userInfo`, `paymentObject`
  4. **Prefer positive names for booleans.**
     * Bad: `isNotActive`
     * Good: `isActive`
  5. **Don’t encode type in the name.**
     * Bad: `userArray`, `strName`
     * Good: `users`, `name`
  6. **Pluralize for collections.**
     * Bad: `user`
     * Good: `users` (if it’s an array)
  7. **Be specific with function names.**
     * Bad: `update()`
     * Good: `updateUserProfile()`
  8. **Avoid context repetition.**
     * Bad: `user_userName`, `cartCartItems`
     * Good: `userName`, `cartItems`
  9. **Use domain language.**
     * Bad: `thing`, `item`, `stuff`
     * Good: `invoice`, `transaction`, `product`
  10. **Don’t be afraid of longer names if they add clarity.**
     * Bad: `fn`, `val`
     * Good: `formatUserName`, `totalOrderValue`
  11. **Prefix event handlers with 'on' or 'handle'.**
     * Bad: `click()`, `submit()`
     * Good: `onButtonClick()`, `handleFormSubmit()`
  12. **Avoid misleading names.**
     * Bad: `isLoaded` (when it means loading)
     * Good: `isLoading` (if true when loading)


## Final Thoughts
Bad names are like glitter: once they’re in your codebase, they’re hard to get rid of. But with a little effort (and maybe a few laughs at your old `fooBar` variables), you can make your code a much friendlier place for everyone—including future you. Happy naming!
*****
Made with [Astro](https://astro.build/)


--- From : https://www.bntharu.com.np/blog/resources ---
List of blogs and videos about different technologies
  * [Projects](https://www.bntharu.com.np/projects)
    * [ ](https://www.github.com/baijanathTharu)
    * [ ](https://www.linkedin.com/in/bntharu)


# [Baijan. A Software Developer ](https://www.bntharu.com.np/)
  * [Projects](https://www.bntharu.com.np/projects)


  * [ ](https://www.github.com/baijanathTharu)
  * [ ](https://www.linkedin.com/in/bntharu)


# List of blogs and videos about different technologies
May 20 2022 (3 min read) 
* * *
### This is the list of all the important blogs and videos that I think are worth looking at.
  * [Why I avoid async/await](https://uniqname.medium.com/why-i-avoid-async-await-7be98014b73e)
  * [Event Loop in NodeJS— Visualized](https://medium.com/@mmoshikoo/event-loop-in-nodejs-visualized-235867255e81)
  * [Filtering, Pagination and Sorting in graphql](https://www.howtographql.com/graphql-js/8-filtering-pagination-and-sorting/)
  * [Why I Recommend a Feature-Driven Approach to Software Design](https://khalilstemmler.com/articles/software-design-architecture/feature-driven/)
  * [Why we switched to GoLang](https://medium.com/@samuellaroche/why-we-switched-to-golang-53cb15868eef)
  * [Introduction to Test-Driven Development (TDD) with Classic TDD Example](https://khalilstemmler.com/articles/test-driven-development/introduction-to-tdd/)
  * [How to escape React Hooks Hell](https://medium.com/battlefy/how-to-escape-react-hooks-hell-a66c0d142c9e)
  * [React clean architecture](https://github.com/eduardomoroni/react-clean-architecture)
  * [Dependency Inversion vs. Dependency Injection](https://betterprogramming.pub/straightforward-simple-dependency-inversion-vs-dependency-injection-7d8c0d0ed28e)
  * [How to ask questions as a new engineer](https://genericmikechen.hashnode.dev/how-to-ask-questions-as-a-new-engineer)
  * [How Javascript & Execution Context Works?](https://medium.com/@muhammad.umair1019/how-javascript-execution-context-works-3ce9fef228d5)
  * [Git commands nobody has told you](https://bootcamp.uxdesign.cc/git-commands-nobody-has-told-you-cd7025bea8db)
  * [How to design a Notification System](https://leandrofranchi.medium.com/how-to-design-a-notification-system-23f381cdeb00)
  * [How to design a Notification System](https://leandrofranchi.medium.com/how-to-design-a-notification-system-23f381cdeb00)
  * [Remove the if-else hell](https://medium.com/javarevisited/remove-the-if-else-hell-java-7927194bd2e)
  * [The frontend Rendering dilemma: SSG vs ISG vs SSR vs CSR — When to use which?](https://medium.com/@amine.elwer/the-frontend-rendering-dilemma-ssg-vs-isg-vs-ssr-vs-csr-when-to-use-which-c1d4597aef67)
  * [Stop over-abstracting your React components](https://tech.groww.in/stop-over-abstracting-your-react-components-196400210a7a)
  * [Am I a senior Front-End developer?](https://medium.com/codex/am-i-a-senior-front-end-developer-6596142bf647)
  * [Worst JavaScript practices that degrade code quality](https://tech.groww.in/worst-javascript-practices-that-degrade-code-quality-c21e068f0212)
  * [Code like there is no if-statement](https://medium.com/@shirkavand/code-like-there-is-no-if-statement-36ca170c2b92)
  * [Good API design, bad API design](https://levelup.gitconnected.com/good-api-design-bad-api-design-2405dcdde24c)
  * [3 Design Patterns Every Developer Should Learn](https://medium.com/bitsrc/3-design-patterns-every-developer-should-learn-71a51568ac9d)
  * [Bad Habits of Mid-Level React Developers](https://enlear.academy/bad-habits-of-mid-level-react-developers-66662d0d88ef)
  * [5 Traits of a Bad Code Reviewer](https://medium.com/@ms_lizzie/5-traits-of-a-bad-code-reviewer-598da8e6dc19)
  * [Don’t Use CRUD Styled APIs, Consider Intent-Based Rest APIs](https://betterprogramming.pub/intent-based-rest-apis-or-an-alternative-to-crud-based-rest-apis-1815599db60a)
  * [The ultimate guide to preparing for the coding interview](https://medium.com/free-code-camp/the-ultimate-guide-to-preparing-for-the-coding-interview-183251ee36c9)
  * [React Is Eating Itself](https://dev.to/bytebodger/react-is-eating-itself-fga)
  * [React Worst Practices — The Beginning](https://rahuulmiishra.medium.com/react-worst-practices-bdf924efe470)
  * [How much technical debt do you own?](https://medium.com/@pplupo/how-much-technical-debt-do-you-own-92c52f30d454)
  * [Software Documentation Best Practices (With Examples)](https://medium.com/@mithunmanoharan/software-documentation-best-practices-with-examples-8983b2bee99b)
  * [Multi-Tenant Application](https://medium.com/@sudheer.sandu/multi-tenant-application-68c11cc68929)
  * [Getting Started with a Multi-tenant Application on Node.js](https://blog.lftechnology.com/designing-a-secure-and-scalable-multi-tenant-application-on-node-js-15ae13dda778)
  * [If the Backend API Returns 100,000 Records at One Time, How Should We Handle it in the Frontend?](https://medium.com/frontend-canteen/if-the-backend-api-returns-100-000-records-at-one-time-how-should-we-handle-it-in-the-frontend-fab21218fe2)
  * [How to useMemo and useCallback: you can remove most of them](https://adevnadia.medium.com/how-to-usememo-and-usecallback-you-can-remove-most-of-them-b8ef01b2020d)
  * [30 Chrome extensions every developer must have](https://studentsxstudents.com/30-chrome-extensions-every-developer-must-have-276f95b5c8e)
  * [7±2 Reasons Psychology Will Help You Write Better Code by Moran Weber](https://www.youtube.com/watch?v=jAUcbFM0nXE)
  * [Advanced JavaScript Concepts that Helped Me Get Better at Coding](https://blog.bitsrc.io/advanced-javascript-aspect-that-helped-me-get-better-at-coding-8d5c794e4392)
  * [The New Javascript is HERE! Discover 5 New Amazing FEATURES](https://medium.com/@Luna-Rojas/the-new-javascript-is-here-discover-5-new-amazing-features-47984cc8e41)
  * [Fundamental Software Architectural Patterns](https://medium.com/@liams_o/fundamental-software-architectural-patterns-663440c5f9a5)
  * [How to Choose the Right Database for Your Application](https://medium.com/javascript-in-plain-english/how-to-choose-the-right-database-for-your-application-11475c9ff242)
  * [Fundamental Laws of Software Development](https://medium.com/thatoneaspiringengineeringmanager/examining-popular-principles-and-laws-in-software-engineering-c8eb764fcb38)
  * [Microservices: Designing Effective Microservices by following SOLID Design Principles](https://medium.com/@saurabh.engg.it/microservices-designing-effective-microservices-by-following-solid-design-principles-a995c3a033a0)
  * [The S.O.L.I.D Principles in Pictures](https://medium.com/backticks-tildes/the-s-o-l-i-d-principles-in-pictures-b34ce2f1e898)
  * [S.O.L.I.D Principles with JS examples](https://medium.com/front-end-weekly/s-o-l-i-d-principles-with-js-examples-db95b44e82e)
  * [My 9 Favorite Design Patterns in JavaScript](https://blog.bitsrc.io/my-9-favorite-design-patterns-in-javascript-9d2a09651d08)
  * [How We Build Micro Frontends](https://blog.bitsrc.io/how-we-build-micro-front-ends-d3eeeac0acfc)
  * [Use TypeScript Conditional Types Like a Pro](https://javascript.plainenglish.io/use-typescript-conditional-types-like-a-pro-7baea0ad05c5)
  * [Microservice Architecture and Design Patterns for Microservices](https://medium.com/@madhukaudantha/microservice-architecture-and-design-patterns-for-microservices-e0e5013fd58a)
  * [Why you shouldn’t use Enums in your Code](https://anthony-trad.medium.com/why-you-shouldnt-use-enums-in-your-code-2059cf558105)
  * [Clean Node.js Architecture —With NestJs and TypeScript](https://betterprogramming.pub/clean-node-js-architecture-with-nestjs-and-typescript-34b9398d790f)
  * [Building attractive CLIs in TypeScript](https://blog.terrible.dev/Building-attractive-CLIs-in-JavaScript/)
  * [Don’t write reusable code](https://medium.com/@scott.boring.sb/dont-write-reusable-code-a857e925b683)
  * [15 fundamental tips on REST API design](https://medium.com/@liams_o/15-fundamental-tips-on-rest-api-design-9a05bcd42920)
  * [Reactivity in Solidjs](https://www.solidjs.com/guides/reactivity)
  * [REST API Design: Filtering, Sorting, and Pagination](https://www.moesif.com/blog/technical/api-design/REST-API-Design-Filtering-Sorting-and-Pagination/)
  * [Things you should know before moving to any JavaScript framework.](https://vijaytembugade.medium.com/things-you-should-know-before-moving-to-any-javascript-framework-466f328f18b4)
  * [Front-End Architecture 101 - Nir Kaufman](https://www.youtube.com/watch?v=o8THlN8hgcw)
  * [Clean Architecture on Frontend](https://dev.to/bespoyasov/clean-architecture-on-frontend-4311)
  * [Programming’s Greatest Mistakes - Mark Rendle - NDC Copenhagen 2022](https://www.youtube.com/watch?v=qC_ioJQpv4E)
  * [Adding Circuit Breakers to Node.Js APIs](https://selvaganesh93.medium.com/adding-circuit-breakers-to-nodejs-apis-8c980d3e96c4)
  * [How Redis Can Make Authentication 10x Easier For Your Users](https://javascript.plainenglish.io/how-redis-can-make-authentication-10x-easoer-for-your-users-cd8c0601d38)
  * [Hexagonal Architecture from the Ground Up](https://levelup.gitconnected.com/hexagonal-architecture-from-the-ground-up-28f2a1097063)
  * [Build Decoupled React Components with Inversion of Control](https://blog.bitsrc.io/inversion-of-control-with-react-584533e49245)
  * [How does NodeJS handle multiple requests?](https://medium.com/@kumuthini.program/how-does-nodejs-handle-multiple-requests-97a2b094e762)
  * [“Wouldn’t it be cool…” and other bad design approaches - Billy Hollis - NDC Oslo 2022](https://www.youtube.com/watch?v=o4mVlUY-TvI&ab_channel=NDCConferences)
  * [Building data-centric apps with a reactive relational database](https://riffle.systems/essays/prelude/#introduction)
  * [Caching things every Programmer must know](https://medium.com/javarevisited/caching-things-every-programmer-must-know-28d4a7e8b9b1)
  * [Improve how you architect webapps](https://www.patterns.dev/)
  * [This Programming Principle will Reduce if/else Statements](https://blog.bitsrc.io/reduce-if-else-switch-usage-with-this-programming-principle-8756358365cd)
  * [JavaScript Async/Await Tutorial – Learn Callbacks, Promises, and Async/Await in JS by Making Ice Cream](https://www.freecodecamp.org/news/javascript-async-await-tutorial-learn-callbacks-promises-async-await-by-making-icecream/)
  * [Feature Toggles (aka Feature Flags)](https://martinfowler.com/articles/feature-toggles.html)
  * [The Ultimate Guide to Testing with Prisma: CI Pipelines](https://www.prisma.io/blog/testing-series-5-xWogenROXm)


*****
Made with [Astro](https://astro.build/)
